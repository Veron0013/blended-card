{"version":3,"file":"products-api-YzKNy_vv.js","sources":["../../src/js/refs.js","../../src/js/render-function.js","../../src/js/storage.js","../../src/js/products-api.js"],"sourcesContent":["//Обʼєкт з посиланнями на ДОМ елементи\n\nexport default {\n\tBASE_URL: 'https://dummyjson.com/products',\n\tqCategories: 'https://dummyjson.com/products/categories',\n\tcurrentQuery: \"\",\n\tcurrentPage: 1,\n\ttotalItems: 0,\n\tdefLimit: 12,\n\tproductID: 0,\n\tprice: 0,\n\tinWishList: false,\n\tinCardList: false,\n\t//LS vars\n\tWL_DATA: \"wishListData\",\n\tCD_DATA: \"cardData\",\n\tTC_REMOVE: \"Remove from cart\",\n\tTW_REMOVE: \"Remove from Wishlist\",\n\tTC_ADD: \"Add to cart\",\n\tTW_ADD: \"Add to Wishlist\",\n\n\t//elements\n\tcategoryList: document.querySelector(\".categories\"),\n\tproductList: document.querySelector(\".products\"),\n\tload_more: document.querySelector(\".load-more__btn\"),\n\tsearchForm: document.querySelector(\".search-form\"),\n\tdivNotFound: document.querySelector(\".not-found\"),\n\tsearchFormButton: document.querySelector(\".search-form__btn-clear\"),\n\t//modal\n\tproductModal: document.querySelector(\".modal-product\"),\n\tsectionModal: document.querySelector(\".modal\"),\n\tcloseBtnModal: document.querySelector(\".modal__close-btn\"),\n\t//card ==== wishlist\n\tarrOfCounters: document.querySelectorAll(\"nav__count\"),\n\taddToWishList: document.querySelector(\".modal-product__btn--wishlist\"),\n\taddToCart: document.querySelector(\".modal-product__btn--cart\"),\n\tcardCount: document.querySelector(\"[data-cart-count]\"),\n\twishCount: document.querySelector(\"[data-wishlist-count]\"),\n\t//card elements\n\tcardItemsCount: document.querySelector(\"[data-count]\"),\n\tcardItemsTotal: document.querySelector(\"[data-price]\")\n};\n","//Функцію для створення, рендеру або видалення розмітки\n\nimport refs from \"./refs\";\nimport * as storageLib from \"./storage.js\";\n\nexport function createMarcup(element, data, callBack, clearElement = false) {\n\tif (clearElement) {\n\t\telement.innerHTML = \"\";\n\t}\n\telement.insertAdjacentHTML(\"beforeend\", callBack(data));\n}\n\nexport const markUpCategories = (data) => {\n\tconst mkData = data.map(({ name, url }) => {\n\t\treturn `<li class=\"categories__item\" data-url=\"${url}\">\n\t\t\t\t\t<button  class=\"categories__btn\" type=\"button\">${name}\n\t\t\t\t\t</button>\n\t\t\t\t</li>`;\n\t})\n\t\t.join(\"\");\n\treturn `<li class=\"categories__item\" data-url=\"${refs.BASE_URL}\">\n\t\t\t\t\t<button  class=\"categories__btn\" type=\"button\">ALL\n\t\t\t\t\t</button>\n\t\t\t\t</li>${mkData}`\n}\n\nexport const markUpProducts = (data) => {\n\tconst mkData = data.map(({ id, title, description, dimensions, category, price, discountPercentage, rating, stock, brand, sku, reviews, barcode, images }) => {\n\t\treturn `<li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${images[0]}\" alt=\"${title}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:</span>${brand}</p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: ${price}$</p>\n </li>`\t})\n\t\t.join(\"\");\n\n\treturn mkData;\n}\n\nexport const markUpProductModal = ({ id, title, description, dimensions, category, price, discountPercentage, rating, stock, brand, sku, reviews, returnPolicy, images, shippingInformation, tags }) => {\n\tconst tagsList = tags?.map(tag => `<li class=\"modal-product__tag-item\">#${tag}</li>`) || [];\n\tconst tagsMark = tagsList.join('');\n\n\tconst dicsount = discountPercentage > 5 ? ` <p class=\"modal-product__price-before\">Price: <span class=\"modal-product__price-before-cross\">${Math.round(price * (1 + (discountPercentage / 100)))}$</span></p>` : ``;\n\n\tconst mkData = `<img class=\"modal-product__img\" src=\"${images[0]}\" alt=\"${title}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${tagsMark}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping: ${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy: ${returnPolicy}</p>${dicsount}\n\t\t\t\t<p class=\"modal-product__price\">Price: ${price}$</p>\n        <button class=\"load-more__btn\" type=\"button\">Buy</button>\n      </div>`;\n\t//console.log(\"mark\", mkData);\n\n\trefs.productID = id;\n\trefs.price = price;\n\n\treturn mkData;\n}\n\nexport function clearElement(element) {\n\telement.innerHTML = '';\n}\n\nexport function hideViewElement(element, className) {\n\telement.classList.remove(className);\n}\n\nexport function showViewElement(element, className) {\n\telement.classList.add(className);\n}\n\nexport function validateStorageData(button, dataKey, refConst, addConst, removeConst) {\n\n\trefConst = storageLib.StorageService.isInWishList(dataKey, refs.productID);\n\tbutton.textContent = refConst ? addConst : removeConst;\n}\n\n//refs.isInWishList = storageLib.StorageService.isInCardList(refs.CD_DATA, refs.productID);\n//refs.addToCart.textContent = refs.isInWishList ? refs.TC_REMOVE : refs.TC_ADD;\n\n//validateStorageData(refs.addToCart, refs.CD_DATA, refs.isInWishList, refs.TC_ADD, refs.TC_REMOVE);\n\nexport function updateButtonState(button, storageKey, labelAdd, labelRemove, callBack) {\n\tconst isInStorage = callBack(storageKey, refs.productID);\n\tbutton.textContent = isInStorage ? labelRemove : labelAdd;\n\tconsole.log(button, isInStorage, storageKey);\n\n\treturn isInStorage;\n}","//Робота з loacalStorage\nimport refs from \"./refs.js\";\nimport * as render from \"./render-function.js\";\n\nexport function updateHeader() {\n\treadLocalStorage();\n}\n\nexport const readLocalStorage = () => {\n\tconst items = [\n\t\t{ key: refs.WL_DATA, el: refs.wishCount },\n\t\t{ key: refs.CD_DATA, el: refs.cardCount },\n\t];\n\n\titems.forEach(({ key, el }) => {\n\t\tif (localStorage.getItem(key)) {\n\t\t\tStorageService.setCountTo(el, key);\n\t\t}\n\t});\n\n}\n\nexport const StorageService = {\n\tget(key) {\n\t\treturn JSON.parse(localStorage.getItem(key)) || [];\n\t},\n\taddToWishList(key, item) {\n\t\tconst data = this.get(key);\n\t\tif (!data.includes(item)) {\n\t\t\tdata.push(item);\n\t\t\tlocalStorage.setItem(key, JSON.stringify(data));\n\t\t}\n\t},\n\taddToCard(key, id, price, qty = 1) {\n\t\tconst data = this.get(key);\n\t\tconst index = data.findIndex(itm => itm.id === id);\n\n\t\tif (index === -1) {\n\t\t\tdata.push({ id, price, qty });\n\t\t} else {\n\t\t\tconsole.log(\"izitoast\");\n\t\t\t//data[index].qty += qty;\n\t\t}\n\t\tlocalStorage.setItem(key, JSON.stringify(data));\n\t},\n\t// isCard = true → масив об'єктів з id, false → масив простих id\n\tremoveFromStorage(key, id, isCard = false) {\n\t\tconst data = this.get(key);\n\t\tconst fArray = data.filter(itm => isCard ? itm.id !== id : itm !== id);\n\t\tlocalStorage.setItem(key, JSON.stringify(fArray));\n\t},\n\tsetTotalCard(el) {\n\t\tconst arrOfItems = this.get(refs.CD_DATA);\n\t\tlet total = 0;\n\t\tif (arrOfItems.length) {\n\t\t\ttotal = arrOfItems.reduce((acc, val) => acc + val.price * val.qty, 0);\n\t\t}\n\t\tconsole.log(total);\n\n\t\tel.textContent = `${total.toFixed(2)} $`;\n\t},\n\tcount(key) {\n\t\treturn this.get(key).length;\n\t},\n\tisInCardList(key, id) {\n\t\treturn this\n\t\t\t.get(key)\n\t\t\t.find(x => x.id === id) !== undefined;\n\t},\n\tisInWishList(key, id) {\n\t\treturn this\n\t\t\t.get(key)\n\t\t\t.find(x => x === id) !== undefined;\n\t},\n\tsetCountTo(el, key) {\n\t\tel.textContent = this.count(key);\n\t},\n};\n\nexport function confirmAndCloseModal(button, keyData, addToCard = false) {\n\tbutton.disabled = true;\n\tconsole.log(\"refID\", refs.productID);\n\n\n\tif (addToCard) {\n\t\tStorageService.addToCard(keyData, refs.productID, refs.price);\n\t\t//button.textContent = \"Remove from card\";\n\t} else {\n\t\tStorageService.addToWishList(keyData, refs.productID);\n\t}\n\t//render.hideViewElement(refs.sectionModal, 'modal--is-open');\n\tbutton.disabled = false;\n\n\tupdateHeader();\n}\n\n\n//ai допоміг скласти\nexport function toggleStorageItem({\n\tbutton,\n\tkey,\n\tid,\n\taddHandler,\n\tcheckHandler,\n\tremoveHandler,\n\tupdateButton,\n\tlabelAdd,\n\tlabelRemove,\n\tisCard = false\n}) {\n\tconst isInStorage = checkHandler(key, id);\n\n\tif (isInStorage) {\n\t\tremoveHandler(key, id, isCard);\n\t} else {\n\t\taddHandler(button, key);\n\t}\n\n\tupdateButton(button, key, labelAdd, labelRemove, checkHandler);\n\n\tupdateHeader();\n}\n\nupdateHeader();\n\nexport const isInWishListBind = StorageService.isInWishList.bind(StorageService);\nexport const isInCardListBind = StorageService.isInCardList.bind(StorageService);\nexport const RemoveFromStorageBind = StorageService.removeFromStorage.bind(StorageService);\n","// Функції для роботи з бекендом\nimport axios from \"axios\";\nimport refs from \"./refs\";\n\nexport async function getApiData(url) {\n\treturn await axios.get(url)\n\t\t.then(data => data)\n\t\t.catch(error => error.message);\n};\n\nexport const buildQuery = (base, page, limit) => {\n\treturn `${base}?limit=${limit}&skip=${(page - 1) * limit}`;\n};\n"],"names":["refs","createMarcup","element","data","callBack","clearElement","markUpCategories","mkData","name","url","markUpProducts","id","title","description","dimensions","category","price","discountPercentage","rating","stock","brand","sku","reviews","barcode","images","markUpProductModal","returnPolicy","shippingInformation","tags","tagsMark","tag","dicsount","hideViewElement","className","showViewElement","updateButtonState","button","storageKey","labelAdd","labelRemove","isInStorage","updateHeader","readLocalStorage","key","el","StorageService","item","qty","itm","isCard","fArray","arrOfItems","total","acc","val","x","confirmAndCloseModal","keyData","addToCard","toggleStorageItem","addHandler","checkHandler","removeHandler","updateButton","isInWishListBind","isInCardListBind","RemoveFromStorageBind","getApiData","axios","error","buildQuery","base","page","limit"],"mappings":"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"}