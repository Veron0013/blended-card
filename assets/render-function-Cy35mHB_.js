import{a as I}from"./vendor-DGDcxXwr.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))c(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&c(n)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function c(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}})();const r={BASE_URL:"https://dummyjson.com/products",qCategories:"https://dummyjson.com/products/categories",currentQuery:"",currentPage:1,totalItems:0,defLimit:12,productID:0,price:0,inWishList:!1,inCardList:!1,isSearch:!1,WL_DATA:"wishListData",CD_DATA:"cardData",TC_REMOVE:"Remove from cart",TW_REMOVE:"Remove from Wishlist",TC_ADD:"Add to cart",TW_ADD:"Add to Wishlist",categoryList:document.querySelector(".categories"),productList:document.querySelector(".products"),load_more:document.querySelector(".load-more__btn"),searchForm:document.querySelector(".search-form"),divNotFound:document.querySelector(".not-found"),searchFormButton:document.querySelector(".search-form__btn-clear"),productModal:document.querySelector(".modal-product"),sectionModal:document.querySelector(".modal"),closeBtnModal:document.querySelector(".modal__close-btn"),arrOfCounters:document.querySelectorAll("nav__count"),addToWishList:document.querySelector(".modal-product__btn--wishlist"),addToCart:document.querySelector(".modal-product__btn--cart"),cardCount:document.querySelector("[data-cart-count]"),wishCount:document.querySelector("[data-wishlist-count]"),cardItemsCount:document.querySelector("[data-count]"),cardItemsTotal:document.querySelector("[data-price]"),backoTop:document.querySelector(".back-to-top")};function m(){q()}const q=()=>{[{key:r.WL_DATA,el:r.wishCount},{key:r.CD_DATA,el:r.cardCount}].forEach(({key:t,el:o})=>{localStorage.getItem(t)&&i.setCountTo(o,t)})},i={get(e){return JSON.parse(localStorage.getItem(e))||[]},addToWishList(e,t){const o=this.get(e);o.includes(t)||(o.push(t),localStorage.setItem(e,JSON.stringify(o)))},addToCard(e,t,o,c=1){const s=this.get(e);s.findIndex(n=>n.id===t)===-1?s.push({id:t,price:o,qty:c}):console.log("izitoast"),localStorage.setItem(e,JSON.stringify(s))},removeFromStorage(e,t,o=!1){const s=this.get(e).filter(a=>o?a.id!==t:a!==t);localStorage.setItem(e,JSON.stringify(s))},setTotalCard(e){const t=this.get(r.CD_DATA);let o=0;t.length&&(o=t.reduce((c,s)=>c+s.price*s.qty,0)),console.log(o),e.textContent=`${o.toFixed(2)} $`},count(e){return this.get(e).length},isInCardList(e,t){return this.get(e).find(o=>o.id===t)!==void 0},isInWishList(e,t){return this.get(e).find(o=>o===t)!==void 0},setCountTo(e,t){e.textContent=this.count(t)||0}};function w(e,t,o=!1){e.disabled=!0,console.log("refID",r.productID),o?i.addToCard(t,r.productID,r.price):i.addToWishList(t,r.productID),e.disabled=!1,m()}function x({button:e,key:t,id:o,addHandler:c,checkHandler:s,removeHandler:a,updateButton:n,labelAdd:l,labelRemove:d,isCard:p=!1}){s(t,o)?a(t,o,p):c(e,t),n(e,t,l,d,s),m()}m();const M=i.isInWishList.bind(i),W=i.isInCardList.bind(i),F=i.removeFromStorage.bind(i);async function S(e){return await I.get(e).then(t=>t).catch(t=>t.message)}const N=(e,t,o,c="?")=>`${e}${c}limit=${o}&skip=${t}`;function C(e,t,o,c=!1){c&&(e.innerHTML=""),e.insertAdjacentHTML("beforeend",o(t))}const U=e=>{const t=e.map(({name:o,url:c})=>`<li class="categories__item" data-url="${c}">
					<button  class="categories__btn" type="button">${o}
					</button>
				</li>`).join("");return`<li class="categories__item" data-url="${r.BASE_URL}">
					<button  class="categories__btn" type="button">ALL
					</button>
				</li>${t}`},v=e=>e.map(({id:o,title:c,description:s,dimensions:a,category:n,price:l,discountPercentage:d,rating:p,stock:f,brand:_,sku:g,reviews:h,barcode:L,images:u})=>`<li class="products__item" data-id="${o}">
    <img class="products__image" src="${u[0]}" alt="${c}"/>
    <p class="products__title">${c}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span>${_}</p>
    <p class="products__category">Category: ${n}</p>
    <p class="products__price">Price: ${l}$</p>
 </li>`).join(""),E=({id:e,title:t,description:o,dimensions:c,category:s,price:a,discountPercentage:n,rating:l,stock:d,brand:p,sku:f,reviews:_,returnPolicy:g,images:h,shippingInformation:L,tags:u})=>{const T=((u==null?void 0:u.map($=>`<li class="modal-product__tag-item">#${$}</li>`))||[]).join(""),A=n>5?` <p class="modal-product__price-before">Price: <span class="modal-product__price-before-cross">${Math.round(a*(1+n/100))}$</span></p>`:"",b=`<img class="modal-product__img" src="${h[0]}" alt="${t}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${t}</p>
        <ul class="modal-product__tags">${T}</ul>
        <p class="modal-product__description">${o}</p>
        <p class="modal-product__shipping-information">Shipping: ${L}</p>
        <p class="modal-product__return-policy">Return Policy: ${g}</p>${A}
				<p class="modal-product__price">Price: ${a}$</p>
        <button class="load-more__btn" type="button">Buy</button>
      </div>`;return r.productID=e,r.price=a,b};function O(e){e.innerHTML=""}function j(e,t){e.classList.remove(t)}function D(e,t){e.classList.add(t)}function y(e,t,o,c,s){const a=s(t,r.productID);return e.textContent=a?c:o,a}const k=async e=>{try{const t=await S(e);C(r.productModal,t.data,E,!0),D(r.sectionModal,"modal--is-open"),r.inWishList=y(r.addToWishList,r.WL_DATA,r.TW_ADD,r.TW_REMOVE,M),r.inCardList=y(r.addToCart,r.CD_DATA,r.TC_ADD,r.TC_REMOVE,W)}catch(t){console.log(t.message)}};function J(e){console.log("cart/list"),O(r.productList),m(),e===r.CD_DATA&&(i.setCountTo(r.cardItemsCount,r.CD_DATA),i.setTotalCard(r.cardItemsTotal)),P(e),D(r.searchForm,"hidden")}async function P(e){const t=i.get(e);console.log(e,t);const o=t.map(a=>{const n=e===r.CD_DATA?a.id:a,l=r.BASE_URL+`/${n}`;return S(l).then(d=>d.data).catch(d=>(console.error("Помилка для id:",n,d),null))}),s=(await Promise.all(o)).filter(Boolean);console.log("марк",s),C(r.productList,s,v,!1)}export{F as R,k as a,j as b,J as c,w as d,M as e,O as f,D as g,S as h,W as i,C as j,v as k,N as l,U as m,r,x as t,y as u};
//# sourceMappingURL=render-function-Cy35mHB_.js.map
