import{r as e,g as p,a as v,b as d,t as c,d as s,h as i,j as l,m as h,k as f,l as u,e as m,i as y,R as g,u as L,f as E}from"./assets/render-function-DzNjxG26.js";import"./assets/vendor-DGDcxXwr.js";const _=async()=>{try{const a=await i(e.qCategories);l(e.categoryList,a.data,h,!0)}catch(a){console.log(a.message)}},n=async(a,t=!1)=>{var r;s(e.load_more,"hidden"),d(e.divNotFound,"not-found--visible");try{const o=await i(a);(!Array.isArray((r=o.data)==null?void 0:r.products)||o.data.products.length===0)&&s(e.divNotFound,"not-found--visible"),l(e.productList,o.data.products,f,!t),e.totalItems=o.data.total,e.totalItems>e.currentPage*e.defLimit&&d(e.load_more,"hidden")}catch(o){console.log(o.message)}finally{e.load_more.disabled=!1}};e.categoryList.addEventListener("click",a=>{const t=a.target.closest(".categories__item");if(!t)return;e.isSearch=!1,e.currentPage=1,p(e.productList),e.currentQuery=t.dataset.url;const r=(e.currentPage-1)*12,o=u(e.currentQuery,r,e.defLimit);n(o)});e.productList.addEventListener("click",a=>{const t=a.target.closest(".products__item");if(!t)return;console.log(t);const r=t.dataset.id,o=e.BASE_URL+`/${r}`;console.log(o),v(o)});e.load_more.addEventListener("click",a=>{e.load_more.disabled=!0,e.currentPage++;const t=(e.currentPage-1)*12,r=e.isSearch?"&":"?",o=u(e.currentQuery,t,e.defLimit,r);console.log(o),n(o,!0)});e.closeBtnModal.addEventListener("click",a=>{d(e.sectionModal,"modal--is-open")});e.searchForm.addEventListener("submit",a=>{a.preventDefault(),localStorage.clear(),e.isSearch=!0,e.currentPage=1;const t=a.currentTarget.elements.searchValue.value.trim();if(!t||t.length<1)return;e.currentQuery=e.BASE_URL+`/search?q=${t}`;const r=`${e.currentQuery}&limit=${e.defLimit}&skip=${(e.currentPage-1)*e.defLimit}`;n(r)});e.addToCart.addEventListener("click",a=>{c({button:e.addToCart,key:e.CD_DATA,id:e.productID,addHandler:(t,r)=>m(t,r,!0),checkHandler:y,removeHandler:g,updateButton:L,labelAdd:e.TC_ADD,labelRemove:e.TC_REMOVE,isCard:!0})});e.addToWishList.addEventListener("click",a=>{c({button:e.addToWishList,key:e.WL_DATA,id:e.productID,addHandler:(t,r)=>m(t,r),checkHandler:E,removeHandler:g,updateButton:L,labelAdd:e.TW_ADD,labelRemove:e.TW_REMOVE})});document.addEventListener("DOMContentLoaded",()=>{console.log("Кнопка search чистить local storage"),_(),d(e.searchForm,"hidden")});window.addEventListener("scroll",()=>{console.log(window.scrollY),window.scrollY>600?d(e.backoTop,"hidden"):s(e.backoTop,"hidden")});e.backoTop.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})});
//# sourceMappingURL=index.js.map
