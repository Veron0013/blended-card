import"./assets/styles-DT-UWGMR.js";import{r as e,c as _,h as s,t as u,g as c,a as i,m as y,s as n,b as v,d as f,u as d,i as m,e as g,f as L,j as p,R as h}from"./assets/products-api-CBr3JhCe.js";import"./assets/vendor-DGDcxXwr.js";const E=async()=>{try{const a=await c(e.qCategories);i(e.categoryList,a.data,y,!0)}catch(a){console.log(a.message)}},l=async(a,t=!1)=>{var r;n(e.load_more,"hidden"),s(e.divNotFound,"not-found--visible");try{const o=await c(a);(!Array.isArray((r=o.data)==null?void 0:r.products)||o.data.products.length===0)&&n(e.divNotFound,"not-found--visible"),i(e.productList,o.data.products,v,!t),e.totalItems=o.data.total,e.totalItems>e.currentPage*e.defLimit&&s(e.load_more,"hidden")}catch(o){console.log(o.message)}finally{e.load_more.disabled=!1}},A=async a=>{try{const t=await c(a);i(e.productModal,t.data,f,!0),n(e.sectionModal,"modal--is-open"),e.inWishList=d(e.addToWishList,e.WL_DATA,e.TW_ADD,e.TW_REMOVE,m),e.inCardList=d(e.addToCart,e.CD_DATA,e.TC_ADD,e.TC_REMOVE,g)}catch(t){console.log(t.message)}};e.categoryList.addEventListener("click",a=>{const t=a.target.closest(".categories__item");if(!t)return;e.isSearch=!1,e.currentPage=1,_(e.productList),e.currentQuery=t.dataset.url;const r=(e.currentPage-1)*12,o=L(e.currentQuery,r,e.defLimit);l(o)});e.productList.addEventListener("click",a=>{const t=a.target.closest(".products__item");if(!t)return;console.log(t);const r=t.dataset.id,o=e.BASE_URL+`/${r}`;console.log(o),A(o)});e.load_more.addEventListener("click",a=>{e.load_more.disabled=!0,e.currentPage++;const t=(e.currentPage-1)*12,r=e.isSearch?"&":"?",o=L(e.currentQuery,t,e.defLimit,r);console.log(o),l(o,!0)});e.closeBtnModal.addEventListener("click",a=>{s(e.sectionModal,"modal--is-open")});e.searchForm.addEventListener("submit",a=>{a.preventDefault(),localStorage.clear(),e.isSearch=!0,e.currentPage=1;const t=a.currentTarget.elements.searchValue.value.trim();if(!t||t.length<1)return;e.currentQuery=e.BASE_URL+`/search?q=${t}`;const r=`${e.currentQuery}&limit=${e.defLimit}&skip=${(e.currentPage-1)*e.defLimit}`;l(r)});e.addToCart.addEventListener("click",a=>{u({button:e.addToCart,key:e.CD_DATA,id:e.productID,addHandler:(t,r)=>p(t,r,!0),checkHandler:g,removeHandler:h,updateButton:d,labelAdd:e.TC_ADD,labelRemove:e.TC_REMOVE,isCard:!0})});e.addToWishList.addEventListener("click",a=>{u({button:e.addToWishList,key:e.WL_DATA,id:e.productID,addHandler:(t,r)=>p(t,r),checkHandler:m,removeHandler:h,updateButton:d,labelAdd:e.TW_ADD,labelRemove:e.TW_REMOVE})});document.addEventListener("DOMContentLoaded",()=>{console.log("Кнопка search чистить local storage"),E()});
//# sourceMappingURL=index.js.map
