import"./assets/styles-DT-UWGMR.js";import{r as e,c as p,h as c,a as u,b as n,m as L,s as d,d as f,e as y}from"./assets/storage-Dd-qVddR.js";import{a as h}from"./assets/vendor-DGDcxXwr.js";async function i(a){return await h.get(a).then(t=>t).catch(t=>t.message)}const m=(a,t,o)=>`${a}?limit=${o}&skip=${(t-1)*o}`,v=async()=>{try{const a=await i(e.qCategories);console.log(a),n(e.categoryList,a.data,L,!0)}catch(a){console.log(a.message)}},l=async(a,t=!1)=>{var o,s;d(e.load_more,"hidden"),c(e.divNotFound,"not-found--visible");try{const r=await i(a),g=!Array.isArray((o=r.data)==null?void 0:o.products)||r.data.products.length===0;console.log(a,g),(!Array.isArray((s=r.data)==null?void 0:s.products)||r.data.products.length===0)&&d(e.divNotFound,"not-found--visible"),n(e.productList,r.data.products,f,!t),e.totalItems=r.data.total,console.log(e.totalItems,e.currentPage*e.defLimit),e.totalItems>e.currentPage*e.defLimit&&c(e.load_more,"hidden")}catch(r){console.log(r.message)}finally{e.load_more.disabled=!1}},P=async a=>{try{const t=await i(a);console.log(t.data,"render",e.productModal),n(e.productModal,t.data,y,!0),d(e.sectionModal,"modal--is-open")}catch(t){console.log(t.message)}};e.categoryList.addEventListener("click",a=>{const t=a.target.closest(".categories__item");if(!t)return;e.currentPage=1,p(e.productList),e.currentQuery=t.dataset.url;const o=(e.currentPage-1)*12,s=m(e.currentQuery,o,e.defLimit);l(s)});e.productList.addEventListener("click",a=>{const t=a.target.closest(".products__item");if(!t)return;console.log(t);const o=t.dataset.id,s=e.BASE_URL+`/${o}`;console.log(s),P(s)});e.load_more.addEventListener("click",a=>{e.load_more.disabled=!0,e.currentPage++;const t=(e.currentPage-1)*12,o=m(e.currentQuery,t,e.defLimit);console.log(o),l(o,!0)});e.closeBtnModal.addEventListener("click",a=>{c(e.sectionModal,"modal--is-open")});e.searchForm.addEventListener("submit",a=>{a.preventDefault(),localStorage.clear(),e.currentPage=1;const t=a.currentTarget.elements.searchValue.value.trim();if(!t||t.length<1)return;e.currentQuery=e.BASE_URL+`/search?q=${t}`;const o=`${e.currentQuery}&limit=${e.defLimit}&skip=${(e.currentPage-1)*e.defLimit}`;console.log(o),l(o)});e.addToCart.addEventListener("click",a=>{u(e.addToCart,e.CD_DATA)});e.addToWishList.addEventListener("click",a=>{u(e.addToWishList,e.WL_DATA)});document.addEventListener("DOMContentLoaded",()=>{console.log("home"),v()});
//# sourceMappingURL=index.js.map
