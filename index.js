import"./assets/styles-DT-UWGMR.js";import{r as e,c as v,h as n,t as m,g as i,a as l,m as f,s as c,b as A,d as E,u as s,i as g,e as p,f as L,j as y,R as _}from"./assets/products-api-YzKNy_vv.js";import"./assets/vendor-DGDcxXwr.js";const D=async()=>{try{const a=await i(e.qCategories);console.log(a),l(e.categoryList,a.data,f,!0)}catch(a){console.log(a.message)}},u=async(a,t=!1)=>{var o,d;c(e.load_more,"hidden"),n(e.divNotFound,"not-found--visible");try{const r=await i(a),h=!Array.isArray((o=r.data)==null?void 0:o.products)||r.data.products.length===0;console.log(a,h),(!Array.isArray((d=r.data)==null?void 0:d.products)||r.data.products.length===0)&&c(e.divNotFound,"not-found--visible"),l(e.productList,r.data.products,A,!t),e.totalItems=r.data.total,console.log(e.totalItems,e.currentPage*e.defLimit),e.totalItems>e.currentPage*e.defLimit&&n(e.load_more,"hidden")}catch(r){console.log(r.message)}finally{e.load_more.disabled=!1}},T=async a=>{try{const t=await i(a);console.log(t.data,"render",e.productModal),l(e.productModal,t.data,E,!0),c(e.sectionModal,"modal--is-open"),e.inWishList=s(e.addToWishList,e.WL_DATA,e.TW_ADD,e.TW_REMOVE,g),e.inCardList=s(e.addToCart,e.CD_DATA,e.TC_ADD,e.TC_REMOVE,p)}catch(t){console.log(t.message)}};e.categoryList.addEventListener("click",a=>{const t=a.target.closest(".categories__item");if(!t)return;e.currentPage=1,v(e.productList),e.currentQuery=t.dataset.url;const o=(e.currentPage-1)*12,d=L(e.currentQuery,o,e.defLimit);u(d)});e.productList.addEventListener("click",a=>{const t=a.target.closest(".products__item");if(!t)return;console.log(t);const o=t.dataset.id,d=e.BASE_URL+`/${o}`;console.log(d),T(d)});e.load_more.addEventListener("click",a=>{e.load_more.disabled=!0,e.currentPage++;const t=(e.currentPage-1)*12,o=L(e.currentQuery,t,e.defLimit);console.log(o),u(o,!0)});e.closeBtnModal.addEventListener("click",a=>{n(e.sectionModal,"modal--is-open")});e.searchForm.addEventListener("submit",a=>{a.preventDefault(),localStorage.clear(),e.currentPage=1;const t=a.currentTarget.elements.searchValue.value.trim();if(!t||t.length<1)return;e.currentQuery=e.BASE_URL+`/search?q=${t}`;const o=`${e.currentQuery}&limit=${e.defLimit}&skip=${(e.currentPage-1)*e.defLimit}`;console.log(o),u(o)});e.addToCart.addEventListener("click",a=>{m({button:e.addToCart,key:e.CD_DATA,id:e.productID,addHandler:(t,o)=>y(t,o,!0),checkHandler:p,removeHandler:_,updateButton:s,labelAdd:e.TC_ADD,labelRemove:e.TC_REMOVE,isCard:!0})});e.addToWishList.addEventListener("click",a=>{m({button:e.addToWishList,key:e.WL_DATA,id:e.productID,addHandler:(t,o)=>y(t,o),checkHandler:g,removeHandler:_,updateButton:s,labelAdd:e.TW_ADD,labelRemove:e.TW_REMOVE})});document.addEventListener("DOMContentLoaded",()=>{console.log("home"),D()});
//# sourceMappingURL=index.js.map
