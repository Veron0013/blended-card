import"./assets/styles-DT-UWGMR.js";import{r as e,c as u,h as r,a as l,b as c,m,s,d as g,e as L}from"./assets/storage-_NphWXHv.js";import{a as f}from"./assets/vendor-DGDcxXwr.js";async function d(a){return await f.get(a).then(t=>t).catch(t=>t.message)}const p=async()=>{try{const a=await d(e.qCategories);console.log(a),c(e.categoryList,a.data,m,!0)}catch(a){console.log(a.message)}},n=async(a,t=!1)=>{s(e.load_more,"hidden"),r(e.divNotFound,"not-found--visible");try{const o=await d(a);o.data.products.length===0&&s(e.divNotFound,"not-found--visible"),c(e.productList,o.data.products,g,!t),e.totalItems=o.data.total,console.log(e.totalItems,e.currentPage*e.defLimit),e.totalItems>e.currentPage*e.defLimit&&r(e.load_more,"hidden")}catch(o){console.log(o.message)}finally{e.load_more.disabled=!1}},h=async a=>{try{const t=await d(a);console.log(t.data,e.productModal),c(e.productModal,t.data,L,!0),s(e.sectionModal,"modal--is-open")}catch(t){console.log(t.message)}};e.categoryList.addEventListener("click",a=>{const t=a.target.closest(".categories__item");if(!t)return;e.currentPage=1,u(e.productList),e.currentQuery=t.dataset.url;const o=e.currentQuery+`?limit=12&skip=${(e.currentPage-1)*12}`;n(o)});e.load_more.addEventListener("click",a=>{e.load_more.disabled=!0,e.currentPage++;const t=e.currentQuery+`&limit=${e.defLimit}&skip=${(e.currentPage-1)*e.defLimit}`;console.log(t),n(t,!0)});e.productList.addEventListener("click",a=>{const t=a.target.closest(".products__item");if(!t)return;console.log(t);const o=t.dataset.id,i=e.BASE_URL+`/${o}`;console.log(i),h(i)});e.closeBtnModal.addEventListener("click",a=>{r(e.sectionModal,"modal--is-open")});e.searchForm.addEventListener("submit",a=>{a.preventDefault(),localStorage.clear(),e.currentPage=1;const t=a.currentTarget.elements.searchValue.value.trim();if(!t||t.length<1)return;e.currentQuery=e.BASE_URL+`/search?q=${t}`;const o=`${e.currentQuery}&limit=${e.defLimit}&skip=${(e.currentPage-1)*e.defLimit}`;console.log(o),n(o)});e.addToCart.addEventListener("click",a=>{l(e.addToCart,2,e.CD_DATA)});e.addToWishList.addEventListener("click",a=>{l(e.addToWishList,1,e.WL_DATA)});document.addEventListener("DOMContentLoaded",()=>{console.log("home"),p()});
//# sourceMappingURL=index.js.map
