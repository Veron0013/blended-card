{"version":3,"file":"index.js","sources":["../src/js/products-api.js","../src/home.js"],"sourcesContent":["// Функції для роботи з бекендом\nimport axios from \"axios\";\nimport refs from \"./refs\";\n\nexport async function getApiData(url) {\n\treturn await axios.get(url)\n\t\t.then(data => data)\n\t\t.catch(error => error.message);\n};\n\n\n","//Логіка сторінки Home\nimport refs from \"./js/refs.js\";\nimport * as render from \"./js/render-function.js\";\nimport * as apiRest from \"./js/products-api.js\";\nimport * as helper from \"./js/helpers.js\";\n\n\n\nconst renderCategories = async () => {\n\n\ttry {\n\t\tconst dataCat = await apiRest.getApiData(refs.qCategories);\n\t\tconsole.log(dataCat);\n\t\trender.createMarcup(refs.categoryList, dataCat.data, render.markUpCategories, true);\n\t}\n\tcatch (e) {\n\t\tconsole.log(e.message);\n\t}\n\n}\nconst renderProducts = async (queryLink, loadMore = false) => {\n\trender.showViewElement(refs.load_more, \"hidden\");\n\trender.hideViewElement(refs.divNotFound, \"not-found--visible\");\n\n\ttry {\n\t\tconst dataProd = await apiRest.getApiData(queryLink);\n\t\tif (dataProd.data.products.length === 0) {\n\t\t\trender.showViewElement(refs.divNotFound, \"not-found--visible\");\n\t\t}\n\t\t//console.log(dataProd);\n\t\trender.createMarcup(refs.productList, dataProd.data.products, render.markUpProducts, !loadMore);\n\t\trefs.totalItems = dataProd.data.total;\n\n\t\tconsole.log(refs.totalItems, refs.currentPage * refs.defLimit);\n\n\t\tif (refs.totalItems > refs.currentPage * refs.defLimit) {\n\t\t\trender.hideViewElement(refs.load_more, \"hidden\");\n\t\t}\n\t}\n\tcatch (e) {\n\t\tconsole.log(e.message);\n\t}\n\tfinally {\n\t\trefs.load_more.disabled = false;\n\t}\n}\nconst renderProductsModal = async (queryLink) => {\n\ttry {\n\t\tconst dataProd = await apiRest.getApiData(queryLink);\n\t\tconsole.log(dataProd.data, refs.productModal);\n\t\trender.createMarcup(refs.productModal, dataProd.data, render.markUpProductModal, true);\n\t\trender.showViewElement(refs.sectionModal, 'modal--is-open');\n\t\t//refs.sectionModal.classList.add('modal--is-open');\n\t}\n\tcatch (e) {\n\t\tconsole.log(e.message);\n\t}\n}\n\nrefs.categoryList.addEventListener(\"click\", (e) => {\n\tconst li = e.target.closest(\".categories__item\");\n\tif (!li) return;\n\n\trefs.currentPage = 1;\n\trender.clearElement(refs.productList);\n\trefs.currentQuery = li.dataset.url;\n\n\tconst vQuery = refs.currentQuery + `?limit=12&skip=${(refs.currentPage - 1) * 12}`;\n\trenderProducts(vQuery);\n});\nrefs.load_more.addEventListener(\"click\", (e) => {\n\trefs.load_more.disabled = true;\n\trefs.currentPage++;\n\tconst vQuery = refs.currentQuery + `&limit=${refs.defLimit}&skip=${(refs.currentPage - 1) * refs.defLimit}`;\n\tconsole.log(vQuery);\n\trenderProducts(vQuery, true);\n\n});\nrefs.productList.addEventListener(\"click\", (e) => {\n\tconst prodEl = e.target.closest(\".products__item\");\n\tif (!prodEl) return;\n\n\tconsole.log(prodEl);\n\tconst prodId = prodEl.dataset.id;\n\n\tconst vQuery = refs.BASE_URL + `/${prodId}`;\n\tconsole.log(vQuery);\n\n\trenderProductsModal(vQuery);\n});\nrefs.closeBtnModal.addEventListener(\"click\", (e) => {\n\trender.hideViewElement(refs.sectionModal, 'modal--is-open');\n\t//.classList.remove('modal--is-open');\n});\nrefs.searchForm.addEventListener(\"submit\", (e) => {\n\te.preventDefault();\n\n\tlocalStorage.clear();\n\n\trefs.currentPage = 1;\n\t//renderTools.clearElement(renderTools.productList);\n\tconst searchData = e.currentTarget.elements['searchValue'].value.trim();\n\n\tif (!searchData) return;\n\n\tif (searchData.length < 1) return;\n\trefs.currentQuery = refs.BASE_URL + `/search?q=${searchData}`;\n\tconst vQuery = `${refs.currentQuery}&limit=${refs.defLimit}&skip=${(refs.currentPage - 1) * refs.defLimit}`;\n\tconsole.log(vQuery);\n\n\trenderProducts(vQuery);\n});\nrefs.addToCart.addEventListener(\"click\", (e) => {\n\thelper.confirmAnfCloseModal(refs.addToCart, 2, refs.CD_DATA);\n});\nrefs.addToWishList.addEventListener(\"click\", (e) => {\n\thelper.confirmAnfCloseModal(refs.addToWishList, 1, refs.WL_DATA);\n});\n\n//////// main load\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n\tconsole.log(\"home\");\n\n\trenderCategories();\n});\n"],"names":["getApiData","url","axios","data","error","renderCategories","dataCat","apiRest.getApiData","refs","render.createMarcup","render.markUpCategories","e","renderProducts","queryLink","loadMore","render.showViewElement","render.hideViewElement","dataProd","render.markUpProducts","renderProductsModal","render.markUpProductModal","li","render.clearElement","vQuery","prodEl","prodId","searchData","helper.confirmAnfCloseModal"],"mappings":"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"}