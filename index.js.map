{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/render-function.js","../src/js/products-api.js","../src/home.js"],"sourcesContent":["//Обʼєкт з посиланнями на ДОМ елементи\n\nexport default {\n\tBASE_URL: 'https://dummyjson.com/products',\n\tqCategories: 'https://dummyjson.com/products/categories',\n\tcurrentQuery: \"\",\n\tcategoryList: document.querySelector(\".categories\"),\n\tproductList: document.querySelector(\".products\"),\n\tload_more: document.querySelector(\".load-more__btn\"),\n\tproductModal: document.querySelector(\".modal-product\"),\n\tsectionModal: document.querySelector(\".modal\"),\n\tcloseBtnModal: document.querySelector(\".modal__close-btn\"),\n\tsearchForm: document.querySelector(\".search-form\"),\n\tdivNotFound: document.querySelector(\".not-found\"),\n\tcurrentPage: 1,\n\ttotalItems: 0,\n\tdefLimit: 12\n};\n","//Функцію для створення, рендеру або видалення розмітки\n\nimport refs from \"./refs\";\n\nexport function createMarcup(element, data, callBack, clearElement = false) {\n\n\tif (clearElement) {\n\t\telement.innerHTML = \"\";\n\t}\n\n\telement.insertAdjacentHTML(\"beforeend\", callBack(data));\n}\n\nexport const markUpCategories = (data) => {\n\tconst mkData = data.map(({ name, url }) => {\n\t\treturn `<li class=\"categories__item\" data-url=\"${url}\">\n\t\t\t\t\t<button  class=\"categories__btn\" type=\"button\">${name}\n\t\t\t\t\t</button>\n\t\t\t\t</li>`;\n\t})\n\t\t.join(\"\");\n\treturn mkData + `<li class=\"categories__item\" data-url=\"${refs.BASE_URL}\">\n\t\t\t\t\t<button  class=\"categories__btn\" type=\"button\">ALL\n\t\t\t\t\t</button>\n\t\t\t\t</li>`\n}\n\nexport const markUpProducts = (data) => {\n\tconst mkData = data.map(({ id, title, description, dimensions, category, price, discountPercentage, rating, stock, brand, sku, reviews, barcode, images }) => {\n\t\treturn `<li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${images[0]}\" alt=\"${title}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand:</span>${brand}</p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: ${price}$</p>\n </li>`\t})\n\t\t.join(\"\");\n\n\treturn mkData;\n}\n\nexport const markUpProductModal = ({ title, description, dimensions, category, price, discountPercentage, rating, stock, brand, sku, reviews, returnPolicy, images, shippingInformation, tags }) => {\n\tconst tagsMark = tags\n\t\t.map(tag => `<li class=\"modal-product__tag-item\">#${tag}</li>`)\n\t\t.join('');\n\n\tconst dicsount = discountPercentage > 5 ? ` <p class=\"modal-product__price-before\">Price: <span class=\"modal-product__price-before-cross\">${Math.round(price * (1 + (discountPercentage / 100)))}$</span></p>` : ``;\n\n\tconst mkData = `<img class=\"modal-product__img\" src=\"${images[0]}\" alt=\"${title}\" />\n      <div class=\"modal-product__content\">\n        <p class=\"modal-product__title\">${title}</p>\n        <ul class=\"modal-product__tags\">${tagsMark}</ul>\n        <p class=\"modal-product__description\">${description}</p>\n        <p class=\"modal-product__shipping-information\">Shipping: ${shippingInformation}</p>\n        <p class=\"modal-product__return-policy\">Return Policy: ${returnPolicy}</p>${dicsount}\n\t\t\t\t<p class=\"modal-product__price\">Price: ${price}$</p>\n        <button class=\"load-more__btn\" type=\"button\">Buy</button>\n      </div>`;\n\tconsole.log(mkData);\n\n\treturn mkData;\n}\n\nexport function clearElement(element) {\n\telement.innerHTML = '';\n}\n\nexport function hideViewElement(element, className) {\n\telement.classList.add(className);\n}\n\nexport function showViewElement(element, className) {\n\telement.classList.remove(className);\n}","// Функції для роботи з бекендом\nimport axios from \"axios\";\nimport refs from \"./refs\";\n\nexport async function getApiData(url) {\n\treturn await axios.get(url)\n\t\t.then(data => data)\n\t\t.catch(error => error.message);\n};\n\n\n","//Логіка сторінки Home\nimport refs from \"./js/refs.js\";\nimport * as render from \"./js/render-function.js\";\nimport * as apiRest from \"./js/products-api.js\";\n\n\nconst renderCategories = async () => {\n\n\ttry {\n\t\tconst dataCat = await apiRest.getApiData(refs.qCategories);\n\t\tconsole.log(dataCat);\n\t\trender.createMarcup(refs.categoryList, dataCat.data, render.markUpCategories, true);\n\t}\n\tcatch (e) {\n\t\tconsole.log(e.message);\n\t}\n}\nconst renderProducts = async (queryLink, loadMore = false) => {\n\trender.hideViewElement(refs.load_more, \"hidden\");\n\trender.showViewElement(refs.divNotFound, \"not-found--visible\");\n\n\ttry {\n\t\tconst dataProd = await apiRest.getApiData(queryLink);\n\t\tif (dataProd.data.products.length === 0) {\n\t\t\trender.hideViewElement(refs.divNotFound, \"not-found--visible\");\n\t\t}\n\t\t//console.log(dataProd);\n\t\trender.createMarcup(refs.productList, dataProd.data.products, render.markUpProducts, !loadMore);\n\t\trefs.totalItems = dataProd.data.total;\n\n\t\tconsole.log(refs.totalItems, refs.currentPage * refs.defLimit);\n\n\t\tif (refs.totalItems > refs.currentPage * refs.defLimit) {\n\t\t\trender.showViewElement(refs.load_more, \"hidden\");\n\t\t}\n\t}\n\tcatch (e) {\n\t\tconsole.log(e.message);\n\t}\n\tfinally {\n\t\trefs.load_more.disabled = false;\n\t}\n}\nconst renderProductsModal = async (queryLink) => {\n\ttry {\n\t\tconst dataProd = await apiRest.getApiData(queryLink);\n\t\tconsole.log(dataProd.data, refs.productModal);\n\t\trender.createMarcup(refs.productModal, dataProd.data, render.markUpProductModal, true);\n\t\trefs.sectionModal.classList.add('modal--is-open');\n\t}\n\tcatch (e) {\n\t\tconsole.log(e.message);\n\t}\n}\n\n\nrefs.categoryList.addEventListener(\"click\", (e) => {\n\tconst li = e.target.closest(\".categories__item\");\n\tif (!li) return;\n\n\trefs.currentPage = 1;\n\trender.clearElement(refs.productList);\n\trefs.currentQuery = li.dataset.url;\n\n\tconst vQuery = refs.currentQuery + `?limit=12&skip=${(refs.currentPage - 1) * 12}`;\n\trenderProducts(vQuery);\n});\nrefs.load_more.addEventListener(\"click\", (e) => {\n\trefs.load_more.disabled = true;\n\trefs.currentPage++;\n\tconst vQuery = refs.currentQuery + `&limit=${refs.defLimit}&skip=${(refs.currentPage - 1) * refs.defLimit}`;\n\tconsole.log(vQuery);\n\trenderProducts(vQuery, true);\n\n});\nrefs.productList.addEventListener(\"click\", (e) => {\n\tconst prodEl = e.target.closest(\".products__item\");\n\tif (!prodEl) return;\n\n\tconsole.log(prodEl);\n\tconst prodId = prodEl.dataset.id;\n\n\tconst vQuery = refs.BASE_URL + `/${prodId}`;\n\tconsole.log(vQuery);\n\n\trenderProductsModal(vQuery);\n})\nrefs.closeBtnModal.addEventListener(\"click\", (e) => {\n\trefs.sectionModal.classList.remove('modal--is-open');\n})\nrefs.searchForm.addEventListener(\"submit\", (e) => {\n\te.preventDefault();\n\n\trefs.currentPage = 1;\n\t//renderTools.clearElement(renderTools.productList);\n\tconst searchData = e.currentTarget.elements['searchValue'].value.trim();\n\n\tif (!searchData) return;\n\n\tif (searchData.length < 1) return;\n\trefs.currentQuery = refs.BASE_URL + `/search?q=${searchData}`;\n\tconst vQuery = `${refs.currentQuery}&limit=${refs.defLimit}&skip=${(refs.currentPage - 1) * refs.defLimit}`;\n\tconsole.log(vQuery);\n\n\trenderProducts(vQuery);\n})\n\nrenderCategories();\n"],"names":["refs","createMarcup","element","data","callBack","clearElement","markUpCategories","name","url","markUpProducts","id","title","description","dimensions","category","price","discountPercentage","rating","stock","brand","sku","reviews","barcode","images","markUpProductModal","returnPolicy","shippingInformation","tags","tagsMark","tag","dicsount","mkData","hideViewElement","className","showViewElement","getApiData","axios","error","renderCategories","dataCat","apiRest.getApiData","render.createMarcup","render.markUpCategories","renderProducts","queryLink","loadMore","render.hideViewElement","render.showViewElement","dataProd","render.markUpProducts","e","renderProductsModal","render.markUpProductModal","li","render.clearElement","vQuery","prodEl","prodId","searchData"],"mappings":"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"}